<script>

const data = {
  "user": "a_nice_scicat_user",
  "instance_id": "d1d3dec3-e965-4576-b1c0-4404f9091c3e",
  "scicat_instance_url": "https://your.scicat.instance.ext",
  "scicat_token": "your_scicat_token",
  "datasets": [
    "20.500.12269/99ae086f-62dc-4228-a283-cc1c988c9e59",
    "20.500.12269/041e81c7-f96f-4447-bb34-c8047a6425ac",
    "20.500.12269/6a67b6e6-a202-4a6c-9859-4fecd6655165",
    "20.500.12269/f685a72d-663f-4592-b593-110624d70eb5"
  ]
}

</script>

<h1>SciCat Jupyter Notebook Test</h1>

<p>
This simple page submits a POST request to the SciCat Jupyter Notebook service and request to open a Jupyter Lab with a notebook prepopulated with the relevant information needed to load the datasets from SciCat including the data files  
</p>

<hr>

<p>
Data submitted to the service are:
</p>

<pre id="json"></pre>

<script>

document.getElementById("json").textContent = JSON.stringify(data, undefined, 2);

function openWindowWithPostRequest(url, windowoption, name, params) {
    var form = document.createElement("form");
    form.setAttribute("method", "post");
    form.setAttribute("action", url);
    form.setAttribute("target", name);

    for (var i in params) {
        if (params.hasOwnProperty(i)) {
            var input = document.createElement('input');
            input.type = 'hidden';
            input.name = i;
            input.value = params[i];
            form.appendChild(input);
        }
    }
    document.body.appendChild(form);
    window.open(url, name, windowoption);

    form.submit();
    document.body.removeChild(form);
}

</script>

<hr>

<input type="button" value="Submit request for a Jupyter Notebook instance" onclick="openWindowWithPostRequest('http://localhost:5210/create', '_blank', 'test', data)">

